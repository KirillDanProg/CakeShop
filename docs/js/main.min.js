import{links,smoothScroll,takeOrderLinks}from"./scroll.js";import{menuItems,body,header,active,showModal,scrollWindow,createModal}from"./modal.js";const reviews=document.querySelectorAll(".review-content"),prev=document.querySelector(".prev"),next=document.querySelector(".next"),btns=document.querySelectorAll(".btn"),banner=document.querySelector(".banner-img"),bannerSlides=document.querySelectorAll(".banner-img img"),bannerBtns=document.querySelectorAll(".btn-banner");let currentSlide=0,index=0,isPlaying=!0,intervalID=null;function transitioтFunc(){index/100>bannerSlides.length-2&&(banner.style.transition="none",index=100,banner.style.transform=`translate(-${index}%)`),0===index&&(banner.style.transition="none",index=400,banner.style.transform=`translate(-${index}%)`)}function changeReview(e){let n=e.target;n.classList.contains("btn")&&n.classList.contains("prev")?(currentSlide--,currentSlide<0&&(currentSlide=reviews.length-1),showSlide()):n.classList.contains("btn")&&n.classList.contains("next")&&(currentSlide++,currentSlide>reviews.length-1&&(currentSlide=0),showSlide())}function showSlide(){reviews.forEach((e=>{e.classList.remove("active-review")})),reviews[currentSlide].classList.add("active-review")}function nextBanner(){index+=100,index/100>bannerSlides.length-1&&(index=0),banner.style.transition="0.8s",banner.style.transform=`translate(-${index}%)`}function prevBanner(){index-=100,index<0&&(index=100*(bannerSlides.length-2)),banner.style.transition="0.8s",banner.style.transform=`translate(-${index}%)`}function stopSlider(){isPlaying=!1,clearInterval(intervalID)}function startSlider(){isPlaying&&(intervalID=setInterval((()=>{nextBanner()}),1900))}function getInputName(e){let n=e.target,t=n.parentNode.children[1].innerHTML,r=document.querySelector("input[name=order]");n.classList.contains("take-order-const")||(r.value=t)}next.addEventListener("click",nextBanner),prev.addEventListener("click",prevBanner),btns.forEach((e=>e.addEventListener("click",changeReview))),banner.addEventListener("transitionend",transitioтFunc),bannerBtns.forEach((e=>{e.addEventListener("click",stopSlider)})),startSlider(),takeOrderLinks.forEach((e=>{e.addEventListener("click",getInputName)}));const form=document.querySelector("form"),inputTel=document.querySelector("input[type=tel]"),inputMask=new Inputmask("+7(999) 999-99-99");inputMask.mask(inputTel),new window.JustValidate(".form",{rules:{tel:{required:!0,function:()=>{const e=telSelector.inputmask.unmaskedvalue();return Number(e)&&10===e.length}}},colorWrong:"#ff0f0f",messages:{name:{required:"Введите имя",minLength:"Введите 3 и более символов",maxLength:"Запрещено вводить более 15 символов"},email:{email:"Введите корректный email",required:"Введите email"},tel:{required:"Введите телефон",function:"Здесь должно быть 10 символов без +7"}},submitHandler:function(e){let n=new FormData(e),t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&200===t.status&&console.log("Отправлено")},t.open("POST","mail.php",!0),t.send(n),e.reset()}});